# payment

#### 项目介绍
支付接口对接
#### 业务流程
leanworkcrm后台发起支付请求->跳转到我们的支付页面（例如pay.php）->调用第三方支付接口->跳转支付->支付完成->第三方发起异步通知回调->我们再回调leanworkcrm通知

##开发说明
1.请按照支付接口中文的拼音简写来创建目录
2.开发发起支付页面(pay.php)
3.开发异步通知页面(notify.php)
4.修改配置文件(config.php)
其它的文件不需要改动

##开发注意事项
1.crm接口的订单号是32位的，如果支付接口的订单号字段没那么长，则需要通过别的方式来传或者本地缓存
2.crm接口的金额是元，支付接口有可能是分，记得换算

#### 说明
demo1和demo2只是作为参考和模板(不要改里面的东西)，实际开发时，直接复制，然后用支付商简拼作为目录名称。

demo1是不需要收集用户选项，处理完数据直接跳转
demo2是需要收集用户选项，先收集用户选项，再处理数据再跳转

config.php-------------------支付接口的配置
fileCache.class.php----------文件缓存类
leanworkSDK.php--------------主要是lw那边接口的方法封装了一下，正式上线配置一下支付通道的key
insert.php-------------------把支付成功的数据插入数据库，开发时可以忽略
lib.php----------------------一般常用的方法
log.class.php---------------日志类
pay.php---------------------支付发起页面
mock.php--------------------模拟leanwork发起的支付请求
notify.php------------------支付成功异步通知页面
read_log.php----------------读日志页面




